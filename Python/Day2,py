def input_to_list(input):
    unsafe_data = []
    with open(input) as file:
        lines = file.readlines()
        for line in lines:
            unsafe_data.append([line.strip()])
    return unsafe_data


def make_reports(data):
    reports = []
    for line in data:
        report = [int(str) for str in line[0].split()]
        reports.append(report)
    return reports


def analyse_safety(reports):
    reports_safety = []
    for report in reports:
        direction = ""
        safety = []
        for index in range(1, len(report)):
            diff = report[index] - report[index - 1]
            if index == 1:
                if diff < 0:
                    direction = "descending"
                else:
                    direction = "ascending"
            if diff <= 0:
                new_direction = "descending"
            else:
                new_direction = "ascending"
            if direction != new_direction:
                safety.append("unsafe")
            diff = abs(diff)
            if diff > 0 and diff < 4:
                safety.append("safe")
            else:
                safety.append("unsafe")
        reports_safety.append(safety)
    return reports_safety


def safety_count(safety_reports):
    safe_count = 0
    for report in safety_reports:
        if "unsafe" not in report:
            safe_count += 1
    return safe_count


def main():
    unsafe_data = input_to_list("Day2.txt")
    reports = make_reports(unsafe_data)
    safety_reports = analyse_safety(reports)
    print(safety_count(safety_reports))


if __name__ == "__main__":
    main()
